"use strict";(self["webpackChunk_7OxCloud"]=self["webpackChunk_7OxCloud"]||[]).push([[17],{4246:function(t,i,e){e.d(i,{Z:function(){return u}});var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"data-status"},[!t.isDataEnd||t.loading?i("Loading",{ref:"loading"}):t.length?i("p",{staticClass:"no-more"},[t._v("暂时没有更多了")]):i("div",{staticClass:"no-data"},[i("el-empty",{attrs:{description:"暂无相关视频"}})],1)],1)},a=[],o=e(9884),r={name:"DataStatus",components:{Loading:o.Z},data(){return{observe:null}},props:{length:{type:Number,default:0},isDataEnd:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},mounted(){this.observe=new IntersectionObserver((t=>{t[0].isIntersecting&&this.$emit("getVideoList")}),{threshold:.3}),this.observe.observe(this.$refs.loading.$el)},beforeDestroy(){this.$refs.loading?.$el&&this.observe.unobserve(this.$refs.loading.$el)}},n=r,d=e(1001),l=(0,d.Z)(n,s,a,!1,null,"acf7796e",null),u=l.exports},4366:function(t,i,e){e.d(i,{Z:function(){return l}});var s=function(){var t=this,i=t._self._c;return i("span",{staticClass:"topic-item",style:{"--size":t.size+"px"}},[i("router-link",{attrs:{to:{name:"Topic",params:{tid:t.id}}}},[t._v("# "+t._s(t.description))])],1)},a=[],o={name:"Topic",props:{id:{type:Number|String,required:!0},description:{type:String,default:""},size:{type:Number,default:12}}},r=o,n=e(1001),d=(0,n.Z)(r,s,a,!1,null,"7b01258c",null),l=d.exports},3666:function(t,i,e){e.r(i),e.d(i,{default:function(){return c}});var s=function(){var t=this,i=t._self._c;return i("ScrollVideo",{attrs:{videoList:t.videoList,isDataEnd:t.isDataEnd},on:{getVideoList:t.getVideoList}})},a=[],o=e(2675),r=e(6428),n=e(7035),d={name:"Topic",mixins:[r.Z],components:{ScrollVideo:n.Z},methods:{getVideoList(){return this.reqVideoList((()=>(0,o.MG)(this.tid,this.latestTime)))}},computed:{tid(){return this.$route.params.tid}}},l=d,u=e(1001),h=(0,u.Z)(l,s,a,!1,null,null,null),c=h.exports},7035:function(t,i,e){e.d(i,{Z:function(){return g}});var s=function(){var t=this,i=t._self._c;return i("div",{staticClass:"scroll-video"},[i("div",{ref:"search",staticClass:"search",attrs:{id:"search"}},t._l(t.videoList,(function(e){return i("div",{key:e.vid,staticClass:"video-item"},[i("article",{staticClass:"video-info"},[i("div",{staticClass:"video-info-header"},[i("router-link",{attrs:{to:`/user/${e.author.uid}`}},[i("el-avatar",{staticClass:"video-info-avatar",attrs:{size:40,src:e.author.avatar}})],1),i("div",{staticClass:"video-info-user"},[i("p",{staticClass:"video-info-username"},[i("router-link",{attrs:{to:`/user/${e.author.uid}`}},[t._v(t._s(e.author.username))])],1),i("p",{staticClass:"video-info-time"},[t._v(t._s(t.formatTime(e.publishTime)))])]),e.author.uid!==t.userInfo.uid?i("el-button",{staticClass:"video-info-follow",class:{follow:e.author.isFollow},attrs:{loading:t.loading&&t.uid===e.author.uid,disabled:t.loading&&t.uid===e.author.uid},on:{click:function(i){return t.handleFollow(e)}}},[t._v(t._s(t.loading&&t.uid===e.author.uid&&e.author.isFollow?"取关中":t.loading&&t.uid===e.author.uid&&!e.author.isFollow?"关注中":e.author.isFollow?"已关注":"关注"))]):t._e()],1),i("p",{staticClass:"video-info-desc"},[i("router-link",{attrs:{to:`/video/${e.vid}`}},[i("span",[t._v(t._s(e.description))])])],1)]),i("PlayerWithMethod",t._b({attrs:{height:"560px",isUser:!1}},"PlayerWithMethod",e,!1)),i("div",{staticClass:"video-topics"},t._l(e.topics,(function(e){return i("Topic",t._b({key:e.id,attrs:{size:14}},"Topic",e,!1))})),1)],1)})),0),i("DataStatus",{ref:"loading",attrs:{isDataEnd:t.isDataEnd,length:t.videoList.length},on:{getVideoList:t.getVideoList}})],1)},a=[],o=e(5675),r=e(4781),n=e(3822),d=e(4366),l=e(4246),u=e(7052),h=e(2900),c=e(5980),f={name:"ScrollVideo",data(){return{loading:!1,uid:null}},props:{videoList:{type:Array,default:()=>[]},isDataEnd:{type:Boolean,default:!1}},components:{XgPlayer:o.Z,Topic:d.Z,DataStatus:l.Z,UserOperation:u.Z,PlayerWithMethod:c.Z},methods:{formatTime:r.Z,getVideoList(){this.$emit("getVideoList")},handleFollow(t){this.loading=!0,this.uid=t.author.uid,(0,h.Zz)({userId:t.author.uid,type:t.author.isFollow?2:1}).then((i=>{200===i.status?(t.author.isFollow=!t.author.isFollow,this.videoList.forEach((i=>{i.author.uid===t.author.uid&&(i.author.isFollow=t.author.isFollow)}))):this.$message.error(i.data.msg),this.loading=!1})).catch((()=>{this.loading=!1}))}},computed:{...(0,n.rn)({userInfo:t=>t.user.userInfo})}},v=f,p=e(1001),m=(0,p.Z)(v,s,a,!1,null,"5b3a980e",null),g=m.exports},6428:function(t,i,e){e(7658);i["Z"]={data(){return{videoList:[],latestTime:null,isDataEnd:!1,isRequestData:!1}},methods:{async reqVideoList(t){try{if(this.isRequestData||this.isDataEnd)return;this.isRequestData=!0;const i=await t();if(!i)return;if(200!==i.status)return void this.$message.error(i.data.msg);this.videoList.push(...i.data.data.videos||[]),this.latestTime=i.data.data.nextTime,(i.data.data.videos.length<15||!i.data.data.nextTime)&&(this.isDataEnd=!0),this.isRequestData=!1}catch(i){this.$message.error(i),this.isDataEnd=!0,this.isRequestData=!1}}}}}}]);